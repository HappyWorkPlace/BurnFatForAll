<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Matching Game</title>

<style>
body {
    font-family: Arial, sans-serif;
    text-align: center;
    margin: 0;
    padding: 20px;
    background-color: #F6E2BC; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ */
}

#gameControls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin: 20px 0;
    flex-wrap: wrap;
}

#xrayButton {
    background: linear-gradient(45deg, #6a5acd, #9370db);
    color: white;
    border: none;
    padding: 12px 24px;
    font-size: 16px;
    border-radius: 25px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
    font-weight: bold;
}

#xrayButton:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
}

#xrayButton:disabled {
    background: #cccccc;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

#gameStats {
    display: flex;
    justify-content: center;
    gap: 30px;
    margin: 20px 0;
    flex-wrap: wrap;
}

.stat-box {
    background: rgba(255,255,255,0.8);
    padding: 10px 20px;
    border-radius: 15px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.stat-label {
    font-size: 14px;
    color: #666;
    margin-bottom: 5px;
}

.stat-value {
    font-size: 20px;
    font-weight: bold;
    color: #333;
}

#gameArea {
    display: grid;
    grid-template-columns: repeat(5, 16vw);
    grid-template-rows: repeat(5, 16vw);
    gap: 2vw;
    justify-content: center;
    margin: 20px auto;
    max-width: 100vw;
}

.card {
    width: 16vw;
    height: 16vw;
    background-color: #ffffff;
    position: relative;
    cursor: pointer;
    perspective: 1000px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏° 3D perspective */
    transition: transform 0.6s ease; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÅ‡∏ö‡∏ö‡∏™‡∏°‡∏π‡∏ò */
    border-radius: 10px;
}

.card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    text-align: center;
    transform-style: preserve-3d;
    transition: transform 0.6s ease; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡πÅ‡∏ö‡∏ö‡∏™‡∏°‡∏π‡∏ò */
    transform: rotateY(180deg); /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ñ‡∏ß‡πà‡∏≥‡∏´‡∏ô‡πâ‡∏≤ */
}

.card.flipped .card-inner {
    transform: rotateY(0deg); /* ‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏†‡∏≤‡∏û */
}

.card.xray-reveal .card-inner {
    transform: rotateY(0deg); /* ‡πÅ‡∏™‡∏î‡∏á‡∏†‡∏≤‡∏û‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á X-ray */
}

.card-front, .card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden; /* ‡∏ã‡πà‡∏≠‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏π‡∏Å‡∏´‡∏°‡∏∏‡∏ô */
    border-radius: 10px;
}

.card-back {
    background-color: #3B9097; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏Ñ‡∏ß‡πà‡∏≥ */
    background-size: cover;
    transform: rotateY(180deg); /* ‡∏´‡∏°‡∏∏‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á 180 ‡∏≠‡∏á‡∏®‡∏≤ */
}

.card-front img {
    width: 100%;
    height: 100%;
    display: block;
    border-radius: 10px;
}

#message {
    font-size: 4vw;
    margin-top: 20px;
    color: #333; /* ‡∏™‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
}

#score {
    font-size: 5vw;
    margin-top: 20px;
    color: #000000; /* ‡∏™‡∏µ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏î‡∏≥ */
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2); /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏á‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏°‡∏¥‡∏ï‡∏¥ */
}

.pointing-character {
    position: absolute;
    width: 8vw;
    height: 8vw;
    background-size: cover;
    animation: point 2s ease-in-out infinite;
}

@keyframes point {
    0%, 100% {
        transform: translateX(0);
    }
    50% {
        transform: translateY(-10px);
    }
}

.heart {
    position: absolute;
    font-size: 2vw;
    color: #ff69b4; /* ‡∏™‡∏µ‡∏´‡∏±‡∏ß‡πÉ‡∏à */
    animation: popUp 1s ease-in-out forwards;
    opacity: 0;
}

@keyframes popUp {
    0% {
        transform: scale(0.5);
        opacity: 0;
    }
    50% {
        transform: scale(1.2);
        opacity: 1;
    }
    100% {
        transform: scale(1);
        opacity: 0;
    }
}

.combo {
    font-size: 8vw;
    color: #ff4500;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    animation: comboPop 1.5s ease forwards;
    z-index: 1000;
    opacity: 0;
    font-weight: bold;
    text-shadow: 0px 0px 10px rgba(255, 69, 0, 0.5), 0px 0px 20px rgba(255, 69, 0, 0, 0.3);
}

@keyframes comboPop {
    0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
    }
    30% {
        transform: translate(-50%, -50%) scale(1.2);
        opacity: 1;
    }
    50% {
        transform: translate(-50%, -50%) scale(1);
    }
    70% {
        transform: translate(-50%, -50%) scale(1.1);
    }
    100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0;
    }
}

.xray-effect {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(138, 43, 226, 0.3);
    z-index: 999;
    animation: xrayPulse 2s ease-in-out;
    pointer-events: none;
}

@keyframes xrayPulse {
    0%, 100% {
        background: rgba(138, 43, 226, 0.1);
    }
    50% {
        background: rgba(138, 43, 226, 0.4);
    }
}

.card-shuffle {
    transition: transform 1.5s ease-in-out;
    z-index: 100;
}

@keyframes shuffleMove {
    0% {
        transform: translateX(0) translateY(0) scale(1);
    }
    50% {
        transform: translateX(var(--move-x)) translateY(var(--move-y)) scale(1.05);
    }
    100% {
        transform: translateX(0) translateY(0) scale(1);
    }
}

#gameOverStats {
    background: rgba(255,255,255,0.95);
    border: 3px solid #4a90e2;
    border-radius: 20px;
    padding: 30px;
    margin: 20px auto;
    max-width: 600px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}

.achievement {
    display: inline-block;
    background: linear-gradient(45deg, #ff6b6b, #feca57);
    color: white;
    padding: 8px 16px;
    border-radius: 20px;
    margin: 5px;
    font-weight: bold;
    font-size: 14px;
}

.achievement.speed { background: linear-gradient(45deg, #48dbfb, #0abde3); }
.achievement.combo { background: linear-gradient(45deg, #ff9ff3, #f368e0); }
.achievement.perfect { background: linear-gradient(45deg, #feca57, #ff9f43); }
</style>
</head>
<body>

    <h1 style="font-size: 5vw;">‡πÄ‡∏Å‡∏°‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà ‡∏†‡∏≤‡∏û‡∏´‡∏°‡∏µ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏î‡∏µ</h1>
    
    <div id="gameStats">
        <div class="stat-box">
            <div class="stat-label">‡πÄ‡∏ß‡∏•‡∏≤</div>
            <div class="stat-value" id="timeDisplay">00:00</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</div>
            <div class="stat-value" id="maxComboDisplay">0</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥</div>
            <div class="stat-value" id="accuracyDisplay">100%</div>
        </div>
    </div>

    <div id="gameControls">
        <button id="xrayButton" disabled>üîç X-Ray Vision (‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏±‡∏ö‡∏ñ‡∏π‡∏Å 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)</button>
    </div>

    <div id="score">Score: 0</div>
    <div id="gameArea">
        <!-- ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏î‡∏¢ JavaScript -->
    </div>
    <div id="message">Moves Left: 15</div>

<script>
    const imageLinks = [
        'https://raw.githubusercontent.com/HappyWorkPlace/BurnFatForAll/main/picture/card1.png',
        'https://raw.githubusercontent.com/HappyWorkPlace/BurnFatForAll/main/picture/card2.png',
        'https://raw.githubusercontent.com/HappyWorkPlace/BurnFatForAll/main/picture/card3.png',
        'https://raw.githubusercontent.com/HappyWorkPlace/BurnFatForAll/main/picture/card4.png',
        'https://raw.githubusercontent.com/HappyWorkPlace/BurnFatForAll/main/picture/card5.png',
        'https://raw.githubusercontent.com/HappyWorkPlace/BurnFatForAll/main/picture/card6.png'
    ];

    const specialImage = 'https://raw.githubusercontent.com/HappyWorkPlace/BurnFatForAll/main/picture/pop6.png'; // ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 25

    const stickerLinks = [
        'https://raw.githubusercontent.com/HappyWorkPlace/BurnFatForAll/main/picture/pop1.png',
        'https://raw.githubusercontent.com/HappyWorkPlace/BurnFatForAll/main/picture/pop2.png',
        'https://raw.githubusercontent.com/HappyWorkPlace/BurnFatForAll/main/picture/pop3.png',
        'https://raw.githubusercontent.com/HappyWorkPlace/BurnFatForAll/main/picture/pop4.png',
        'https://raw.githubusercontent.com/HappyWorkPlace/BurnFatForAll/main/picture/pop5.png'  
    ];

    let images = [];
    
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏π‡πà‡∏†‡∏≤‡∏û (4 ‡∏Ñ‡∏π‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏†‡∏≤‡∏û ‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô 24 ‡∏†‡∏≤‡∏û)
    imageLinks.forEach(link => {
        for (let i = 0; i < 4; i++) {
            images.push(link);
        }
    });

    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏†‡∏≤‡∏û‡∏ü‡∏£‡∏µ‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 25
    images.push(specialImage);

    let flippedCards = [];
    let movesLeft = 15;
    let matchedPairs = 0;
    let score = 0;
    let comboCount = 0;
    let maxCombo = 0;
    let correctMatches = 0;
    let totalAttempts = 0;
    let xrayUsed = false;
    let startTime = null;
    let gameStarted = false;
    let pointingInterval;
    let timerInterval;

    const xrayButton = document.getElementById('xrayButton');

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function startTimer() {
        if (!gameStarted) {
            startTime = Date.now();
            gameStarted = true;
            timerInterval = setInterval(updateTimer, 1000);
        }
    }

    function updateTimer() {
        if (startTime) {
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.getElementById('timeDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
    }

    function updateStats() {
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
        document.getElementById('maxComboDisplay').textContent = maxCombo;
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
        const accuracy = totalAttempts > 0 ? Math.round((correctMatches / totalAttempts) * 100) : 100;
        document.getElementById('accuracyDisplay').textContent = `${accuracy}%`;
    }

    function createGameBoard() {
        const gameArea = document.getElementById('gameArea');
        shuffle(images);  // ‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏†‡∏≤‡∏û
        images.forEach((image, index) => {
            const cardElement = document.createElement('div');
            cardElement.className = 'card';
            cardElement.dataset.id = index;
            cardElement.dataset.image = image;

            const cardInner = document.createElement('div');
            cardInner.className = 'card-inner';

            const cardFront = document.createElement('div');
            cardFront.className = 'card-front';
            const imgElement = document.createElement('img');
            imgElement.src = image;
            cardFront.appendChild(imgElement);

            const cardBack = document.createElement('div');
            cardBack.className = 'card-back';

            cardInner.appendChild(cardFront);
            cardInner.appendChild(cardBack);
            cardElement.appendChild(cardInner);

            cardElement.addEventListener('click', flipCard);
            gameArea.appendChild(cardElement);
        });

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏ä‡∏µ‡πâ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏∏‡∏Å 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        pointingInterval = setInterval(suggestCardToFlip, 3000);
        
        // ‡πÄ‡∏û‡∏¥‡πà‡∏° event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° X-Ray
        xrayButton.addEventListener('click', activateXRay);
    }

    function suggestCardToFlip() {
        const cards = document.querySelectorAll('.card:not(.flipped)');
        if (cards.length === 0) return;
        
        const randomCardIndex = Math.floor(Math.random() * cards.length);
        const selectedCard = cards[randomCardIndex];

        // ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πå‡∏ï‡∏π‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏µ‡πâ‡πÄ‡∏Å‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
        const existingCharacter = document.querySelector('.pointing-character');
        if (existingCharacter) {
            existingCharacter.remove();
        }

        // ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏Å‡∏≤‡∏£‡πå‡∏ï‡∏π‡∏ô
        const randomStickerIndex = Math.floor(Math.random() * stickerLinks.length);
        const selectedSticker = stickerLinks[randomStickerIndex];

        const pointingCharacter = document.createElement('div');
        pointingCharacter.className = 'pointing-character';
        pointingCharacter.style.left = 'calc(50% - 4vw)';
        pointingCharacter.style.top = '-8vw';
        pointingCharacter.style.backgroundImage = `url('${selectedSticker}')`;
        selectedCard.appendChild(pointingCharacter);
    }

    function flipCard() {
        startTimer(); // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ö‡πÅ‡∏£‡∏Å
        
        if (flippedCards.length < 2 && !this.classList.contains('flipped')) {
            this.classList.add('flipped');
            flippedCards.push(this);
    
            if (flippedCards.length === 2) {
                movesLeft--;
                totalAttempts++;
                document.getElementById('message').textContent = `Moves Left: ${movesLeft}`;
                checkMatch();
            }
    
            if (movesLeft === 0 && matchedPairs < 12) {
                endGame('Game Over! You are out of moves!');
            }
        }
    }

    function checkMatch() {
        const [card1, card2] = flippedCards;
        if (card1.dataset.image === card2.dataset.image) {
            matchedPairs++;
            correctMatches++;
            comboCount++; // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
            maxCombo = Math.max(maxCombo, comboCount); // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
            
            const scoreToAdd = comboCount; // ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô = ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö
            score += scoreToAdd;
            movesLeft += 1; // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô move ‡πÅ‡∏Ñ‡πà 1 ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
            
            document.getElementById('score').textContent = `Score: ${score}`;
            document.getElementById('message').textContent = `Moves Left: ${movesLeft}`;
            
            createHeartEffect(card1); // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏ö‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ö‡πÅ‡∏£‡∏Å
            createHeartEffect(card2); // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏ö‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ö‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏á
            createComboEffect(comboCount); // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö
            
            updateStats(); // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
            updateXRayButton(); // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç X-Ray
            
            flippedCards = [];
            if (matchedPairs === 12) {
                endGame('‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢ ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏•‡∏¢!!');
            }
        } else {
            comboCount = 0; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏´‡∏≤‡∏Å‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
            updateStats(); // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
            setTimeout(() => {
                card1.classList.remove('flipped');
                card2.classList.remove('flipped');
                flippedCards = [];
            }, 1000);
        }
    }

    function updateXRayButton() {
        if (!xrayUsed && correctMatches >= 3) {
            xrayButton.disabled = false;
            xrayButton.textContent = 'üîç X-Ray Vision (‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô!)';
            xrayButton.style.background = 'linear-gradient(45deg, #00ff00, #32cd32)';
        } else if (!xrayUsed) {
            const remaining = 3 - correctMatches;
            xrayButton.textContent = `üîç X-Ray Vision (‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏±‡∏ö‡∏ñ‡∏π‡∏Å‡∏≠‡∏µ‡∏Å ${remaining} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)`;
        }
    }

    function activateXRay() {
        if (xrayUsed || correctMatches < 3) return;
        
        xrayUsed = true;
        xrayButton.disabled = true;
        xrayButton.textContent = 'üîç X-Ray Vision (‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß)';
        xrayButton.style.background = '#cccccc';
        
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå X-Ray
        const xrayEffect = document.createElement('div');
        xrayEffect.className = 'xray-effect';
        document.body.appendChild(xrayEffect);
        
        // ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        const cards = document.querySelectorAll('.card:not(.flipped)');
        cards.forEach(card => {
            card.classList.add('xray-reveal');
        });
        
        // ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        setTimeout(() => {
            // ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            cards.forEach(card => {
                card.classList.remove('xray-reveal');
            });
            
            // ‡∏™‡∏±‡∏ö‡πÑ‡∏û‡πà‡πÉ‡∏´‡∏°‡πà
            reshuffleCards();
            
            // ‡∏•‡∏ö‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå
            xrayEffect.remove();
        }, 2000);
    }

    function reshuffleCards() {
        const gameArea = document.getElementById('gameArea');
        const cards = Array.from(document.querySelectorAll('.card:not(.flipped)'));
        
        if (cards.length <= 5) {
            // ‡∏ñ‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö 5 ‡πÉ‡∏ö ‡πÉ‡∏´‡πâ‡∏™‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            shuffleAllRemainingCards(cards);
            return;
        }
        
        // ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 5 ‡πÉ‡∏ö‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
        const shuffledCards = [...cards];
        shuffle(shuffledCards);
        const cardsToMove = shuffledCards.slice(0, 5);
        
        // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡∏±‡∏ö
        const imagesToShuffle = cardsToMove.map(card => card.dataset.image);
        shuffle(imagesToShuffle);
        
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á animation ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà
        cardsToMove.forEach((card, index) => {
            // ‡∏™‡∏∏‡πà‡∏°‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà
            const moveX = (Math.random() - 0.5) * 300; // -150 ‡∏ñ‡∏∂‡∏á +150 pixels
            const moveY = (Math.random() - 0.5) * 300; // -150 ‡∏ñ‡∏∂‡∏á +150 pixels
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ CSS variables ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö animation
            card.style.setProperty('--move-x', `${moveX}px`);
            card.style.setProperty('--move-y', `${moveY}px`);
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏° class ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö animation
            card.classList.add('card-shuffle');
            card.style.animation = 'shuffleMove 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏†‡∏≤‡∏û‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å animation ‡πÄ‡∏£‡∏¥‡πà‡∏°
            setTimeout(() => {
                card.dataset.image = imagesToShuffle[index];
                const img = card.querySelector('.card-front img');
                img.src = imagesToShuffle[index];
            }, 400); // ‡∏Å‡∏•‡∏≤‡∏á‡πÜ ‡∏Ç‡∏≠‡∏á animation
        });
        
        // ‡∏•‡∏ö animation class ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å animation ‡πÄ‡∏™‡∏£‡πá‡∏à
        setTimeout(() => {
            cardsToMove.forEach(card => {
                card.classList.remove('card-shuffle');
                card.style.animation = '';
                card.style.removeProperty('--move-x');
                card.style.removeProperty('--move-y');
            });
        }, 800);
        
        // ‡∏•‡∏ö‡∏ï‡∏±‡∏ß‡∏Å‡∏≤‡∏£‡πå‡∏ï‡∏π‡∏ô‡∏ä‡∏µ‡πâ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏ï‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà
        document.querySelectorAll('.pointing-character').forEach(char => char.remove());
    }
    
    function shuffleAllRemainingCards(cards) {
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢ (‡πÄ‡∏î‡∏¥‡∏°)
        const remainingImages = cards.map(card => card.dataset.image);
        shuffle(remainingImages);
        
        cards.forEach((card, index) => {
            card.dataset.image = remainingImages[index];
            const img = card.querySelector('.card-front img');
            img.src = remainingImages[index];
        });
        
        document.querySelectorAll('.pointing-character').forEach(char => char.remove());
    }

    function createHeartEffect(card) {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.textContent = '‚ù§Ô∏è';
        heart.style.left = '50%';
        heart.style.top = '50%';
        heart.style.transform = 'translate(-50%, -50%)';
        card.appendChild(heart);

        setTimeout(() => {
            heart.remove();
        }, 1500); // ‡∏•‡∏ö‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 1.5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    }

    function createComboEffect(comboCount) {
        if (comboCount > 1) {
            const comboMessage = document.createElement('div');
            comboMessage.className = 'combo';
            comboMessage.textContent = `Combo x${comboCount}!`;
            document.body.appendChild(comboMessage);

            setTimeout(() => {
                comboMessage.remove();
            }, 2000); // ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 2.0 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        }
    }

    function endGame(message) {
        clearInterval(pointingInterval);  // ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏ä‡∏µ‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏°‡∏à‡∏ö
        clearInterval(timerInterval);     // ‡∏´‡∏¢‡∏∏‡∏î‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤
        disableCards();
        
        const elapsed = startTime ? Math.floor((Date.now() - startTime) / 1000) : 0;
        const accuracy = totalAttempts > 0 ? Math.round((correctMatches / totalAttempts) * 100) : 100;
        
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•
        let gameOverMessage = `
            <div id="gameOverStats">
                <h2>${message}</h2>
                <div style="margin: 20px 0;">
                    <div><strong>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°:</strong> ${score}</div>
                    <div><strong>‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ:</strong> ${Math.floor(elapsed/60)}:${(elapsed%60).toString().padStart(2,'0')}</div>
                    <div><strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥:</strong> ${accuracy}%</div>
                    <div><strong>‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î:</strong> ${maxCombo}</div>
                </div>
                <div style="margin: 20px 0;">
                    <h3>üèÜ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</h3>
                    ${elapsed <= 120 ? '<span class="achievement speed">‚ö° Speed Master</span>' : ''}
                    ${maxCombo >= 5 ? '<span class="achievement combo">üî• Combo King</span>' : ''}
                    ${accuracy === 100 ? '<span class="achievement perfect">üíé Perfect</span>' : ''}
                </div>
            </div>
        `;
        
        document.getElementById('message').innerHTML = gameOverMessage;
    }

    function disableCards() {
        const allCards = document.querySelectorAll('.card');
        allCards.forEach(card => {
            card.removeEventListener('click', flipCard);
            card.style.cursor = 'default';
        });
    }

    createGameBoard();
</script>

</body>
</html>
