<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
    <title>Leaderboard</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f4f4f4;
        }

        .leaderboard {
            width: 90%;
            max-width: 600px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .leaderboard h2 {
            background-color: #3B9097;
            color: white;
            text-align: center;
            margin: 0;
            padding: 15px;
        }

        .leaderboard-content {
            padding: 20px;
        }

        .leaderboard-content table {
            width: 100%;
            border-collapse: collapse;
        }

        .leaderboard-content th, .leaderboard-content td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .leaderboard-content th {
            background-color: #f6e2bc;
        }

        .leaderboard-content td:first-child {
            text-align: center;
        }

        .leaderboard-content td.rank {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .leaderboard-content td.rank img {
            width: 20px;
            height: 20px;
        }
    </style>
</head>
<body>

<div class="leaderboard">
    <h2>Leaderboard</h2>
    <div class="leaderboard-content">
        <table id="leaderboardTable">
            <!-- Content will be injected here by JavaScript -->
        </table>
    </div>
</div>

<script>
    const API_URL = 'https://script.google.com/macros/s/AKfycbzbi7RXlvS1Lm-o15jKjHJQLxGxZtZm9eR19SMq046xe3tU53JxC1eIGCYlwZ3-tBPu/exec';

    async function fetchRankingData() {
        const response = await fetch(API_URL);
        const data = await response.json();
        return data;
    }

function renderLeaderboard(data) {
    data.sort((a, b) => b.point - a.point);

    leaderboardTable.innerHTML = `
        <tr>
            <th>Rank</th>
            <th>Point</th>
            <th>Name</th>
            <th>Factory</th>
            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏Å‡∏°</th>
        </tr>
    `;

    let previousScore = null;
    let currentRank = 0;
    let displayRank = 0;

    data.forEach((player, index) => {
        // ‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ ‡πÉ‡∏´‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î displayRank ‡πÉ‡∏´‡∏°‡πà
        if (player.point !== previousScore) {
            displayRank = currentRank + 1;
        }
        currentRank++; // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ô‡∏±‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏£‡∏≠‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
        previousScore = player.point;

        let icon = '';
        if (displayRank === 1) icon = 'ü•á';
        else if (displayRank === 2) icon = 'ü•à';
        else if (displayRank === 3) icon = 'ü•â';

        leaderboardTable.innerHTML += `
            <tr>
                <td class="rank"><span>${displayRank}</span> ${icon}</td>
                <td>${player.point}</td>
                <td>${player.name}</td>
                <td>${player.factory}</td>
                <td>${player.games}</td>
            </tr>
        `;
    });
}


    renderLeaderboard();
</script>

</body>
</html>
