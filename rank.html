<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
    <title>Leaderboard</title>

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: #f4f4f4;
    }

    .leaderboard {
        width: 100%;
        max-width: 600px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        overflow: hidden;
    }

    .leaderboard h2 {
        background-color: #3B9097;
        color: white;
        text-align: center;
        margin: 0;
        padding: 15px;
    }

    .leaderboard-content {
        padding: 0; /* Removed padding to avoid spacing issues */
    }

    .leaderboard-content table {
        width: 100%;
        border-collapse: collapse;
        table-layout: auto; /* Allow table to adjust column widths based on content */
    }

    .leaderboard-content th, .leaderboard-content td {
        padding: 10px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }

    .leaderboard-content th {
        background-color: #f6e2bc;
        text-align: center; /* Center headers to match cell alignment */
    }

    .leaderboard-content td:first-child {
        text-align: center;
        width: 10%; /* Control width of rank column */
    }

    .leaderboard-content td.rank {
        text-align: center;
        width: 10%; /* Make sure the rank column is not too wide */
    }

    .leaderboard-content td.point, .leaderboard-content td.name, .leaderboard-content td.factory, .leaderboard-content td.games {
        text-align: center;
        width: 20%; /* Adjust width of other columns to fit content */
    }

    .leaderboard-content tr:nth-child(even) {
        background-color: #f9f9f9; /* Alternate row background color */
    }

    .leaderboard-content tr:hover {
        background-color: #f1f1f1; /* Add hover effect for rows */
    }
</style>

</head>
<body>

<div class="leaderboard">
    <h2>Leaderboard</h2>
    <div class="leaderboard-content">
        <table id="leaderboardTable">
            <!-- Content will be injected here by JavaScript -->
        </table>
    </div>
</div>

<script>
    const API_URL = 'https://script.google.com/macros/s/AKfycbzbi7RXlvS1Lm-o15jKjHJQLxGxZtZm9eR19SMq046xe3tU53JxC1eIGCYlwZ3-tBPu/exec';

    async function fetchRankingData() {
        const response = await fetch(API_URL);
        const data = await response.json();
        return data;
    }

    async function renderLeaderboard() {
        const data = await fetchRankingData();
        
        if (data.length === 0) {
            document.getElementById('leaderboardTable').innerHTML = '<tr><td colspan="5">No data available</td></tr>';
            return;
        }

        document.getElementById('leaderboardTable').innerHTML = `
            <tr>
                <th>Rank</th>
                <th>Point</th>
                <th>Name</th>
                <th>Factory</th>
                <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏Å‡∏°</th>
            </tr>
        `;

        data.sort((a, b) => b.point - a.point);

        let previousScore = null;
        let currentRank = 0;
        let displayRank = 0;

        data.forEach((player, index) => {
            if (player.point !== previousScore) {
                displayRank = currentRank + 1;
            }
            currentRank++;
            previousScore = player.point;

            let icon = '';
            if (displayRank === 1) icon = 'ü•á';
            else if (displayRank === 2) icon = 'ü•à';
            else if (displayRank === 3) icon = 'ü•â';

            document.getElementById('leaderboardTable').innerHTML += `
                <tr>
                    <td class="rank"><span>${displayRank}</span> ${icon}</td>
                    <td>${player.point}</td>
                    <td>${player.name}</td>
                    <td>${player.factory}</td>
                    <td>${player.games}</td>
                </tr>
            `;
        });
    }

    renderLeaderboard();
</script>

</body>
</html>
